# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç¾çŠ¶ãƒ¬ãƒãƒ¼ãƒˆï¼ˆã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‘ã‘ï¼‰

## ðŸ“‹ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå
**SuperMatch** - WhatsAppå®Œçµåž‹è¨€èªžãƒžãƒƒãƒãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹

### å®Ÿç¾ã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹ã“ã¨

**ã‚³ãƒ³ã‚»ãƒ—ãƒˆ**: ã€Œæ™‚é–“ãŒç¢ºå®šã•ã‚ŒãŸã€çœŸå‰£ãªä¼šè©±ã€ã‚’æä¾›ã™ã‚‹è¨€èªžãƒžãƒƒãƒãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹

**æœ€å¤§ã®å·®åˆ¥åŒ–ãƒã‚¤ãƒ³ãƒˆ:**
- DMã—ãªã„
- äº‹å‰ãƒãƒ£ãƒƒãƒˆãªã—
- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã§å³ã‚¢ãƒç¢ºå®š
- **WhatsAppã ã‘ã§å®Œçµ**ï¼ˆWebãƒ•ã‚©ãƒ¼ãƒ ä¸è¦ï¼‰

**ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼:**
1. WhatsAppã§AIãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã¨ä¼šè©±ã—ã¦ç™»éŒ²
2. Google Calendarã¨é€£æº
3. ã‚·ã‚¹ãƒ†ãƒ ãŒè‡ªå‹•ãƒžãƒƒãƒãƒ³ã‚°
4. ãƒžãƒƒãƒãƒ³ã‚°ææ¡ˆã‚’WhatsAppã§é€šçŸ¥
5. æ‰¿èªå¾Œã€Google Meetãƒªãƒ³ã‚¯ã§ä¼šè©±

**æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯:**
- Backend: Node.js (ES Modules) + Express.js
- Database: PostgreSQL (Supabase)
- Chatbot: WhatsApp Business API (Twilio) + OpenAI
- Calendar: Google Calendar API
- Payment: Stripe
- Video: Google Meet
- Notification: WhatsApp Business API

---

## âœ… ã†ã¾ãã„ã£ã¦ã„ã‚‹ã“ã¨

### 1. ã‚³ãƒ¼ãƒ‰å®Ÿè£…ï¼ˆ90%å®Œæˆï¼‰

#### âœ… å®Œäº†ã—ã¦ã„ã‚‹æ©Ÿèƒ½
- [x] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–ï¼ˆpackage.jsonã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ï¼‰
- [x] Expressã‚µãƒ¼ãƒãƒ¼å®Ÿè£…
- [x] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒžè¨­è¨ˆï¼ˆ`database/schema.sql`ï¼‰
- [x] Supabaseçµ±åˆï¼ˆæ¡ä»¶ä»˜ãåˆæœŸåŒ–ï¼‰
- [x] WhatsApp Webhook ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆ`/api/whatsapp/webhook`ï¼‰
- [x] AIãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆå®Ÿè£…ï¼ˆç™»éŒ²ãƒ•ãƒ­ãƒ¼ã€ã‚³ãƒžãƒ³ãƒ‰å¯¾å¿œï¼‰
- [x] Google Calendar APIçµ±åˆï¼ˆOAuthã€ç©ºãæ™‚é–“å–å¾—ã€Google Meetç”Ÿæˆï¼‰
- [x] ãƒžãƒƒãƒãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…ï¼ˆè‡ªå‹•ãƒžãƒƒãƒãƒ³ã‚°ã€ææ¡ˆæ©Ÿèƒ½ï¼‰
- [x] Stripeæ±ºæ¸ˆçµ±åˆï¼ˆãƒã‚¤ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã€Webhookå‡¦ç†ï¼‰
- [x] é€šçŸ¥æ©Ÿèƒ½ï¼ˆWhatsAppé€šçŸ¥ã€ãƒªãƒžã‚¤ãƒ³ãƒ‰ã€è‡ªå‹•ã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼‰
- [x] ãƒãƒƒãƒå‡¦ç†ï¼ˆCron Job: è‡ªå‹•ãƒžãƒƒãƒãƒ³ã‚°ã€ãƒªãƒžã‚¤ãƒ³ãƒ‰ã€è‡ªå‹•ã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼‰
- [x] ç®¡ç†ç”»é¢APIï¼ˆçµ±è¨ˆæƒ…å ±ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ã€ã‚¢ãƒã‚¤ãƒ³ãƒˆãƒ¡ãƒ³ãƒˆä¸€è¦§ã€æ‰‹å‹•ãƒˆãƒªã‚¬ãƒ¼ï¼‰

#### âœ… ã‚¨ãƒ©ãƒ¼å›žé¿æ©Ÿèƒ½
- [x] ãƒãƒ¼ãƒˆç«¶åˆã®è‡ªå‹•è§£æ±ºï¼ˆ3000ãŒä½¿ç”¨ä¸­ã®å ´åˆã€3001, 3002...ã¨è‡ªå‹•æ¤œç´¢ï¼‰
- [x] ç’°å¢ƒå¤‰æ•°ã®è‡ªå‹•ãƒã‚§ãƒƒã‚¯ï¼ˆã‚µãƒ¼ãƒãƒ¼èµ·å‹•æ™‚ã«ã™ã¹ã¦ã®ç’°å¢ƒå¤‰æ•°ã‚’ãƒã‚§ãƒƒã‚¯ï¼‰
- [x] ã‚µãƒ¼ãƒ“ã‚¹æœªè¨­å®šæ™‚ã®ã‚¨ãƒ©ãƒ¼å›žé¿ï¼ˆæœªè¨­å®šã§ã‚‚ã‚µãƒ¼ãƒãƒ¼èµ·å‹•å¯èƒ½ã€æ©Ÿèƒ½ä½¿ç”¨æ™‚ã®ã¿è­¦å‘Šï¼‰
- [x] ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
- [x] ãƒ­ã‚¬ãƒ¼æ©Ÿèƒ½

### 2. ã‚µãƒ¼ãƒãƒ¼èµ·å‹•

**ç¾çŠ¶**: ã‚µãƒ¼ãƒãƒ¼ã¯æ­£å¸¸ã«èµ·å‹•ã™ã‚‹

```bash
npm run dev
```

**èµ·å‹•æ™‚ã®å‡ºåŠ›ä¾‹:**
```
ðŸš€ Server running on port 3001
ðŸ“± WhatsApp webhook: http://localhost:3001/api/whatsapp/webhook

ðŸ“Š Service Status:
   Database: âš ï¸  Not configured
   Twilio: âš ï¸  Not configured
   OpenAI: âš ï¸  Not configured
   Google: âš ï¸  Not configured
   Stripe: âš ï¸  Not configured
```

**å‹•ä½œç¢ºèª:**
- âœ… `/health` ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ: æ­£å¸¸å‹•ä½œ
- âœ… `/api/test` ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ: æ­£å¸¸å‹•ä½œ

### 3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
LanguageMatching/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.js              # ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ routes/               # APIãƒ«ãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ whatsapp.js      # WhatsApp Webhook
â”‚   â”‚   â”œâ”€â”€ calendar.js       # Google Calendar OAuth
â”‚   â”‚   â”œâ”€â”€ payment.js        # Stripeæ±ºæ¸ˆ
â”‚   â”‚   â”œâ”€â”€ matching.js       # ãƒžãƒƒãƒãƒ³ã‚°æ©Ÿèƒ½
â”‚   â”‚   â”œâ”€â”€ admin.js          # ç®¡ç†ç”»é¢API
â”‚   â”‚   â””â”€â”€ test.js           # ãƒ†ã‚¹ãƒˆã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ services/             # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ chatbot.js       # AIãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆ
â”‚   â”‚   â”œâ”€â”€ whatsapp.js      # WhatsAppå‡¦ç†
â”‚   â”‚   â”œâ”€â”€ calendar.js      # Google Calendarå‡¦ç†
â”‚   â”‚   â”œâ”€â”€ matching.js      # ãƒžãƒƒãƒãƒ³ã‚°å‡¦ç†
â”‚   â”‚   â”œâ”€â”€ autoMatching.js  # è‡ªå‹•ãƒžãƒƒãƒãƒ³ã‚°
â”‚   â”‚   â””â”€â”€ reminder.js      # ãƒªãƒžã‚¤ãƒ³ãƒ‰ãƒ»è‡ªå‹•ã‚­ãƒ£ãƒ³ã‚»ãƒ«
â”‚   â”œâ”€â”€ db/                   # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ users.js         # ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
â”‚   â”‚   â””â”€â”€ appointments.js  # ã‚¢ãƒã‚¤ãƒ³ãƒˆãƒ¡ãƒ³ãƒˆç®¡ç†
â”‚   â”œâ”€â”€ utils/                # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚   â”œâ”€â”€ twilio.js        # Twilioå‡¦ç†
â”‚   â”‚   â”œâ”€â”€ env-check.js     # ç’°å¢ƒå¤‰æ•°ãƒã‚§ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ port-check.js    # ãƒãƒ¼ãƒˆãƒã‚§ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ db-check.js      # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚§ãƒƒã‚¯
â”‚   â”‚   â””â”€â”€ logger.js        # ãƒ­ã‚¬ãƒ¼
â”‚   â”œâ”€â”€ jobs/                 # ãƒãƒƒãƒå‡¦ç†
â”‚   â”‚   â””â”€â”€ scheduler.js     # Cron Jobè¨­å®š
â”‚   â””â”€â”€ middleware/           # ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
â”‚       â””â”€â”€ error-handler.js  # ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
â”œâ”€â”€ database/
â”‚   â””â”€â”€ schema.sql            # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒž
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ test-webhook.js       # Webhookãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ test-matching.js      # ãƒžãƒƒãƒãƒ³ã‚°ãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ package.json
â””â”€â”€ .env                      # ç’°å¢ƒå¤‰æ•°ï¼ˆä½œæˆãŒå¿…è¦ï¼‰
```

---

## âš ï¸ ã†ã¾ãã„ã£ã¦ã„ãªã„ã“ã¨

### 1. ç’°å¢ƒå¤‰æ•°ã®è¨­å®šï¼ˆæœ€é‡è¦ï¼‰

**å•é¡Œ**: `.env` ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªã„ã€ã¾ãŸã¯ç’°å¢ƒå¤‰æ•°ãŒæœªè¨­å®š

**å¿…è¦ãªç’°å¢ƒå¤‰æ•°:**
```env
# Server
PORT=3000
NODE_ENV=development

# Twilio (WhatsApp Business API)
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_WHATSAPP_NUMBER=whatsapp:+14155238886

# OpenAI
OPENAI_API_KEY=

# Supabase
SUPABASE_URL=
SUPABASE_KEY=
SUPABASE_SERVICE_KEY=

# Google Calendar
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=http://localhost:3000/api/calendar/callback

# Stripe
STRIPE_SECRET_KEY=
STRIPE_PUBLISHABLE_KEY=
STRIPE_WEBHOOK_SECRET=

# App URLs
APP_BASE_URL=http://localhost:3000

# Admin
ADMIN_TOKEN=change-this-in-production
```

**ç¾çŠ¶:**
- `.env` ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªã„ï¼ˆä½œæˆãŒå¿…è¦ï¼‰
- ã™ã¹ã¦ã®ç’°å¢ƒå¤‰æ•°ãŒæœªè¨­å®š
- ã‚µãƒ¼ãƒãƒ¼ã¯èµ·å‹•ã™ã‚‹ãŒã€æ©Ÿèƒ½ã¯å‹•ä½œã—ãªã„

**å½±éŸ¿:**
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œãŒã§ããªã„
- WhatsAppãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€å—ä¿¡ãŒã§ããªã„
- AIãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆãŒå‹•ä½œã—ãªã„
- Google Calendaré€£æºãŒã§ããªã„
- Stripeæ±ºæ¸ˆãŒã§ããªã„

### 2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒžã®å®Ÿè¡Œ

**å•é¡Œ**: Supabaseã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒžãŒæœªå®Ÿè¡Œ

**å¿…è¦ãªä½œæ¥­:**
1. Supabaseã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
3. SQL Editorã§ `database/schema.sql` ã‚’å®Ÿè¡Œ

**å½±éŸ¿:**
- ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’ä¿å­˜ã§ããªã„
- ã‚¢ãƒã‚¤ãƒ³ãƒˆãƒ¡ãƒ³ãƒˆæƒ…å ±ã‚’ä¿å­˜ã§ããªã„
- ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œãŒå¤±æ•—ã™ã‚‹

### 3. å‹•ä½œãƒ†ã‚¹ãƒˆ

**å•é¡Œ**: å®Ÿéš›ã®å‹•ä½œãƒ†ã‚¹ãƒˆãŒæœªå®Ÿæ–½

**å¿…è¦ãªãƒ†ã‚¹ãƒˆ:**
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãƒ•ãƒ­ãƒ¼ã®ãƒ†ã‚¹ãƒˆ
- [ ] ãƒžãƒƒãƒãƒ³ã‚°æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ
- [ ] é€šçŸ¥æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ
- [ ] æ±ºæ¸ˆæ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ

### 4. ç¹°ã‚Šè¿”ã—ç™ºç”Ÿã™ã‚‹å•é¡Œ

#### å•é¡Œ1: .envãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„

**ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:**
```
Error: Cannot find module './.env'
```

**åŽŸå› :**
- `.env` ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªã„

**è§£æ±ºæ–¹æ³•:**
```bash
cd /Users/masakinakata/LanguageMatching
touch .env
# ã¾ãŸã¯
cat > .env << 'EOF'
# ç’°å¢ƒå¤‰æ•°ã‚’ã“ã“ã«è¨­å®š
EOF
```

**ç¾çŠ¶:**
- ã‚µãƒ¼ãƒãƒ¼ã¯èµ·å‹•ã™ã‚‹ï¼ˆç’°å¢ƒå¤‰æ•°æœªè¨­å®šã§ã‚‚èµ·å‹•å¯èƒ½ï¼‰
- ãŸã ã—ã€æ©Ÿèƒ½ã¯å‹•ä½œã—ãªã„

#### å•é¡Œ2: ç’°å¢ƒå¤‰æ•°æœªè¨­å®šã«ã‚ˆã‚‹è­¦å‘Š

**ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:**
```
âš ï¸  Optional: SUPABASE_URL is not set (some features may not work)
âš ï¸  Optional: TWILIO_ACCOUNT_SID is not set (some features may not work)
```

**åŽŸå› :**
- ç’°å¢ƒå¤‰æ•°ãŒæœªè¨­å®š

**è§£æ±ºæ–¹æ³•:**
- `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã«å¿…è¦ãªç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š

**ç¾çŠ¶:**
- ã‚µãƒ¼ãƒãƒ¼ã¯èµ·å‹•ã™ã‚‹ï¼ˆè­¦å‘Šã®ã¿ï¼‰
- æ©Ÿèƒ½ä½¿ç”¨æ™‚ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹

---

## ðŸ”„ ç¹°ã‚Šè¿”ã—ç™ºç”Ÿã™ã‚‹ã‚¨ãƒ©ãƒ¼

### 1. ç’°å¢ƒå¤‰æ•°æœªè¨­å®šã‚¨ãƒ©ãƒ¼

**ç™ºç”Ÿç®‡æ‰€:**
- `src/db/users.js`: Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆåˆæœŸåŒ–æ™‚
- `src/utils/twilio.js`: Twilioã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆåˆæœŸåŒ–æ™‚
- `src/services/chatbot.js`: OpenAIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆåˆæœŸåŒ–æ™‚
- `src/services/calendar.js`: Google Calendar OAuthåˆæœŸåŒ–æ™‚
- `src/routes/payment.js`: Stripeã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆåˆæœŸåŒ–æ™‚

**ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¾‹:**
```
Error: supabaseUrl is required.
Error: A Twilio Account SID and Auth Token are required to create a Twilio client.
Error: The OpenAI API key is not configured.
```

**ç¾åœ¨ã®å¯¾å¿œ:**
- æ¡ä»¶ä»˜ãåˆæœŸåŒ–ã‚’å®Ÿè£…æ¸ˆã¿
- æœªè¨­å®šã§ã‚‚ã‚µãƒ¼ãƒãƒ¼èµ·å‹•å¯èƒ½
- æ©Ÿèƒ½ä½¿ç”¨æ™‚ã«è­¦å‘Šã‚’è¡¨ç¤º

**è§£æ±ºæ–¹æ³•:**
- `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã«å¿…è¦ãªç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š

### 2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æœªè¨­å®šã‚¨ãƒ©ãƒ¼

**ç™ºç”Ÿç®‡æ‰€:**
- ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œæ™‚

**ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¾‹:**
```
Error: Database is not configured
```

**ç¾åœ¨ã®å¯¾å¿œ:**
- `src/utils/db-check.js` ã§ãƒã‚§ãƒƒã‚¯
- æœªè¨­å®šæ™‚ã¯é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ã™

**è§£æ±ºæ–¹æ³•:**
- Supabaseã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
- ç’°å¢ƒå¤‰æ•°è¨­å®š
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒžå®Ÿè¡Œ

### 3. ãƒãƒ¼ãƒˆç«¶åˆã‚¨ãƒ©ãƒ¼ï¼ˆè§£æ±ºæ¸ˆã¿ï¼‰

**ç™ºç”Ÿç®‡æ‰€:**
- ã‚µãƒ¼ãƒãƒ¼èµ·å‹•æ™‚

**ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¾‹:**
```
Error: listen EADDRINUSE: address already in use :::3000
```

**ç¾åœ¨ã®å¯¾å¿œ:**
- `src/utils/port-check.js` ã§è‡ªå‹•è§£æ±º
- åˆ©ç”¨å¯èƒ½ãªãƒãƒ¼ãƒˆã‚’è‡ªå‹•æ¤œç´¢ï¼ˆ3001, 3002...ï¼‰

**è§£æ±ºæ–¹æ³•:**
- è‡ªå‹•è§£æ±ºæ¸ˆã¿ï¼ˆæ‰‹å‹•å¯¾å¿œä¸è¦ï¼‰

---

## ðŸ“ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆå„ªå…ˆé †ä½é †ï¼‰

### å„ªå…ˆåº¦: æœ€é«˜ï¼ˆä»Šã™ãå¿…è¦ï¼‰

1. **.envãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ**
   - å ´æ‰€: `/Users/masakinakata/LanguageMatching/.env`
   - ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ: ä¸Šè¨˜ã®ç’°å¢ƒå¤‰æ•°ãƒªã‚¹ãƒˆã‚’å‚ç…§

2. **Supabaseè¨­å®š**
   - ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
   - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
   - ç’°å¢ƒå¤‰æ•°è¨­å®šï¼ˆ`SUPABASE_URL`, `SUPABASE_KEY`, `SUPABASE_SERVICE_KEY`ï¼‰
   - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒžå®Ÿè¡Œï¼ˆ`database/schema.sql`ï¼‰

3. **Twilioè¨­å®š**
   - ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
   - WhatsApp Sandboxè¨­å®š
   - ç’°å¢ƒå¤‰æ•°è¨­å®šï¼ˆ`TWILIO_ACCOUNT_SID`, `TWILIO_AUTH_TOKEN`, `TWILIO_WHATSAPP_NUMBER`ï¼‰
   - Webhook URLè¨­å®šï¼ˆngrokä½¿ç”¨ï¼‰

### å„ªå…ˆåº¦: é«˜ï¼ˆãƒªãƒªãƒ¼ã‚¹ã«å¿…é ˆï¼‰

4. **å‹•ä½œãƒ†ã‚¹ãƒˆ**
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãƒ•ãƒ­ãƒ¼ã®ãƒ†ã‚¹ãƒˆ
   - ãƒžãƒƒãƒãƒ³ã‚°æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ
   - é€šçŸ¥æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ

### å„ªå…ˆåº¦: ä¸­ï¼ˆãƒªãƒªãƒ¼ã‚¹å¾Œã«æ”¹å–„ï¼‰

5. **OpenAIè¨­å®š**ï¼ˆAIæ©Ÿèƒ½ã‚’ä½¿ã†å ´åˆï¼‰
6. **Google Calendarè¨­å®š**ï¼ˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼é€£æºã‚’ä½¿ã†å ´åˆï¼‰
7. **Stripeè¨­å®š**ï¼ˆæ±ºæ¸ˆæ©Ÿèƒ½ã‚’ä½¿ã†å ´åˆï¼‰

---

## ðŸ› ï¸ æŠ€è¡“çš„ãªè©³ç´°

### ã‚¨ãƒ©ãƒ¼å›žé¿æ©Ÿèƒ½ã®å®Ÿè£…

#### 1. ãƒãƒ¼ãƒˆç«¶åˆã®è‡ªå‹•è§£æ±º
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/utils/port-check.js`
- **æ©Ÿèƒ½**: ãƒãƒ¼ãƒˆ3000ãŒä½¿ç”¨ä¸­ã®å ´åˆã€è‡ªå‹•çš„ã«åˆ©ç”¨å¯èƒ½ãªãƒãƒ¼ãƒˆã‚’æ¤œç´¢
- **å®Ÿè£…**: `isPortInUse()`, `findAvailablePort()`

#### 2. ç’°å¢ƒå¤‰æ•°ã®è‡ªå‹•ãƒã‚§ãƒƒã‚¯
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/utils/env-check.js`
- **æ©Ÿèƒ½**: ã‚µãƒ¼ãƒãƒ¼èµ·å‹•æ™‚ã«ã™ã¹ã¦ã®ç’°å¢ƒå¤‰æ•°ã‚’ãƒã‚§ãƒƒã‚¯
- **å®Ÿè£…**: `checkEnvironmentVariables()`, `isServiceConfigured()`

#### 3. ã‚µãƒ¼ãƒ“ã‚¹æœªè¨­å®šæ™‚ã®ã‚¨ãƒ©ãƒ¼å›žé¿
- **å®Ÿè£…ç®‡æ‰€**:
  - `src/db/users.js`: Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®æ¡ä»¶ä»˜ãåˆæœŸåŒ–
  - `src/utils/twilio.js`: Twilioã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®æ¡ä»¶ä»˜ãåˆæœŸåŒ–
  - `src/services/chatbot.js`: OpenAIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®æ¡ä»¶ä»˜ãåˆæœŸåŒ–
  - `src/services/calendar.js`: Google Calendar OAuthã®æ¡ä»¶ä»˜ãåˆæœŸåŒ–
  - `src/routes/payment.js`: Stripeã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®æ¡ä»¶ä»˜ãåˆæœŸåŒ–

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒž

**ãƒ•ã‚¡ã‚¤ãƒ«**: `database/schema.sql`

**ãƒ†ãƒ¼ãƒ–ãƒ«:**
- `users`: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±
- `appointments`: ã‚¢ãƒã‚¤ãƒ³ãƒˆãƒ¡ãƒ³ãƒˆæƒ…å ±
- `match_proposals`: ãƒžãƒƒãƒãƒ³ã‚°ææ¡ˆæƒ…å ±ï¼ˆæœªå®Ÿè£…ï¼‰

**æ³¨æ„ç‚¹:**
- ã‚¹ã‚­ãƒ¼ãƒžã¯è¨­è¨ˆæ¸ˆã¿ã ãŒã€Supabaseã§æœªå®Ÿè¡Œ
- `match_proposals` ãƒ†ãƒ¼ãƒ–ãƒ«ã¯æœªå®Ÿè£…ï¼ˆãƒžãƒƒãƒãƒ³ã‚°ææ¡ˆã®æ‰¿èªãƒ•ãƒ­ãƒ¼ã«å¿…è¦ï¼‰

---

## ðŸŽ¯ ãƒªãƒªãƒ¼ã‚¹å¯èƒ½ã‹ï¼Ÿ

### ç¾çŠ¶: ã‚³ãƒ¼ãƒ‰ã¯90%å®Œæˆ

**å®Œäº†ã—ã¦ã„ã‚‹ã“ã¨:**
- âœ… ã™ã¹ã¦ã®ä¸»è¦æ©Ÿèƒ½ã¯å®Ÿè£…æ¸ˆã¿
- âœ… ã‚µãƒ¼ãƒãƒ¼ã¯æ­£å¸¸ã«èµ·å‹•ã™ã‚‹
- âœ… ã‚¨ãƒ©ãƒ¼å›žé¿æ©Ÿèƒ½ãŒå®Ÿè£…æ¸ˆã¿

**æœªå®Œäº†ã®ã“ã¨:**
- âš ï¸ ç’°å¢ƒå¤‰æ•°ã®è¨­å®šãŒå¿…è¦
- âš ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒžã®å®Ÿè¡ŒãŒå¿…è¦
- âš ï¸ å‹•ä½œãƒ†ã‚¹ãƒˆãŒå¿…è¦

### ãƒªãƒªãƒ¼ã‚¹ã™ã‚‹ãŸã‚ã«å¿…è¦ãªä½œæ¥­

**æœ€çŸ­ãƒ«ãƒ¼ãƒˆï¼ˆMVPã¨ã—ã¦å‹•ä½œã•ã›ã‚‹ï¼‰:**

1. **.envãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ**ï¼ˆ5åˆ†ï¼‰
2. **Supabaseè¨­å®š**ï¼ˆ30åˆ†ï¼‰
   - ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
   - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
   - ã‚¹ã‚­ãƒ¼ãƒžå®Ÿè¡Œ
   - ç’°å¢ƒå¤‰æ•°è¨­å®š
3. **Twilioè¨­å®š**ï¼ˆ30åˆ†ï¼‰
   - ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
   - WhatsApp Sandboxè¨­å®š
   - ç’°å¢ƒå¤‰æ•°è¨­å®š
   - Webhook URLè¨­å®š
4. **å‹•ä½œãƒ†ã‚¹ãƒˆ**ï¼ˆ1æ™‚é–“ï¼‰

**åˆè¨ˆ: ç´„2-3æ™‚é–“**

---

## ðŸ“š å‚è€ƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### éžã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢å‘ã‘ã‚¬ã‚¤ãƒ‰
- `OPEN_ENV.md` - .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ¯ãƒ³ã‚¿ãƒƒãƒ—ã§é–‹ãæ–¹æ³•
- `ENV_FILE_LOCATION.md` - .envãƒ•ã‚¡ã‚¤ãƒ«ã®å ´æ‰€ã¨é–‹ãæ–¹
- `ONE_BY_ONE.md` - 1ã¤ãšã¤è¨­å®šã™ã‚‹æ‰‹é †
- `ENV_SETUP_EASY.md` - .envãƒ•ã‚¡ã‚¤ãƒ«è¨­å®šã‚¬ã‚¤ãƒ‰

### ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢å‘ã‘ã‚¬ã‚¤ãƒ‰
- `README_SETUP.md` - è©³ç´°ãªã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †
- `CURRENT_STATUS.md` - ç¾åœ¨ã®çŠ¶æ…‹ã¨æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
- `DEVELOPMENT_PROGRESS.md` - é–‹ç™ºé€²æ—ãƒ¬ãƒãƒ¼ãƒˆ

### è¨ˆç”»æ›¸
- `MVP_MINIMAL.md` - è¶…ãƒŸãƒ‹ãƒžãƒ MVPãƒ—ãƒ©ãƒ³ï¼ˆWhatsAppå®Œçµåž‹ï¼‰
- `ROADMAP.md` - é–‹ç™ºãƒ­ãƒ¼ãƒ‰ãƒžãƒƒãƒ—
- `TECHNICAL_SPEC.md` - æŠ€è¡“é¸å®šãƒ»ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

---

## ðŸ’¡ ä»–ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¸ã®ä¾é ¼äº‹é …

### 1. .envãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆæ”¯æ´

**ä¾é ¼å†…å®¹:**
- `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹
- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’æä¾›ã™ã‚‹
- ç’°å¢ƒå¤‰æ•°ã®è¨­å®šæ–¹æ³•ã‚’èª¬æ˜Žã™ã‚‹

**å‚è€ƒãƒ•ã‚¡ã‚¤ãƒ«:**
- `OPEN_ENV.md`
- `ENV_SETUP_EASY.md`

### 2. Supabaseè¨­å®šæ”¯æ´

**ä¾é ¼å†…å®¹:**
- Supabaseã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆæ‰‹é †ã‚’èª¬æ˜Ž
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒžå®Ÿè¡Œæ‰‹é †ã‚’èª¬æ˜Ž
- ç’°å¢ƒå¤‰æ•°è¨­å®šæ‰‹é †ã‚’èª¬æ˜Ž

**å‚è€ƒãƒ•ã‚¡ã‚¤ãƒ«:**
- `SUPABASE_SETUP.md`ï¼ˆå­˜åœ¨ã™ã‚‹å ´åˆï¼‰
- `database/schema.sql`

### 3. Twilioè¨­å®šæ”¯æ´

**ä¾é ¼å†…å®¹:**
- Twilioã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆæ‰‹é †ã‚’èª¬æ˜Ž
- WhatsApp Sandboxè¨­å®šæ‰‹é †ã‚’èª¬æ˜Ž
- Webhook URLè¨­å®šæ‰‹é †ã‚’èª¬æ˜Ž

**å‚è€ƒãƒ•ã‚¡ã‚¤ãƒ«:**
- `TWILIO_SETUP.md`ï¼ˆå­˜åœ¨ã™ã‚‹å ´åˆï¼‰

### 4. å‹•ä½œãƒ†ã‚¹ãƒˆæ”¯æ´

**ä¾é ¼å†…å®¹:**
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãƒ•ãƒ­ãƒ¼ã®ãƒ†ã‚¹ãƒˆæ‰‹é †ã‚’èª¬æ˜Ž
- ãƒžãƒƒãƒãƒ³ã‚°æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆæ‰‹é †ã‚’èª¬æ˜Ž
- ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã®å¯¾å‡¦æ–¹æ³•ã‚’èª¬æ˜Ž

**å‚è€ƒãƒ•ã‚¡ã‚¤ãƒ«:**
- `HOW_TO_TEST.md`
- `QUICK_TEST.md`

---

## ðŸ” ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®ä¸»è¦ãƒ•ã‚¡ã‚¤ãƒ«

### ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
- `src/index.js` - ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«

### ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
- `src/routes/whatsapp.js` - WhatsApp Webhook
- `src/routes/calendar.js` - Google Calendar OAuth
- `src/routes/payment.js` - Stripeæ±ºæ¸ˆ
- `src/routes/matching.js` - ãƒžãƒƒãƒãƒ³ã‚°æ©Ÿèƒ½
- `src/routes/admin.js` - ç®¡ç†ç”»é¢API
- `src/routes/test.js` - ãƒ†ã‚¹ãƒˆã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

### ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
- `src/services/chatbot.js` - AIãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆ
- `src/services/whatsapp.js` - WhatsAppå‡¦ç†
- `src/services/calendar.js` - Google Calendarå‡¦ç†
- `src/services/matching.js` - ãƒžãƒƒãƒãƒ³ã‚°å‡¦ç†
- `src/services/autoMatching.js` - è‡ªå‹•ãƒžãƒƒãƒãƒ³ã‚°
- `src/services/reminder.js` - ãƒªãƒžã‚¤ãƒ³ãƒ‰ãƒ»è‡ªå‹•ã‚­ãƒ£ãƒ³ã‚»ãƒ«

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- `src/db/users.js` - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
- `src/db/appointments.js` - ã‚¢ãƒã‚¤ãƒ³ãƒˆãƒ¡ãƒ³ãƒˆç®¡ç†
- `database/schema.sql` - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒž

### ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
- `src/utils/twilio.js` - Twilioå‡¦ç†
- `src/utils/env-check.js` - ç’°å¢ƒå¤‰æ•°ãƒã‚§ãƒƒã‚¯
- `src/utils/port-check.js` - ãƒãƒ¼ãƒˆãƒã‚§ãƒƒã‚¯
- `src/utils/db-check.js` - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚§ãƒƒã‚¯
- `src/utils/logger.js` - ãƒ­ã‚¬ãƒ¼

---

## ðŸ“ž é€£çµ¡å…ˆãƒ»ã‚µãƒãƒ¼ãƒˆ

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå**: SuperMatch  
**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¹**: `/Users/masakinakata/LanguageMatching`  
**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¿ã‚¤ãƒ—**: Node.js (ES Modules) + Express.js

**ä¸»è¦ã‚³ãƒžãƒ³ãƒ‰:**
```bash
# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run dev

# æœ¬ç•ªã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm start
```

---

**æœ€çµ‚æ›´æ–°**: 2024å¹´XXæœˆXXæ—¥  
**ä½œæˆè€…**: AI Assistant (Cursor)  
**ç›®çš„**: ä»–ã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¸ã®ç¾çŠ¶èª¬æ˜Ž

